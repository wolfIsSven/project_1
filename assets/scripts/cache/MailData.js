cc.Class({
    properties: {
        _lastTime: 0,
        _redPoint: 0,
    },

    setMails: function (mails) {
        this.mails = {};
        this.sortedMailIds = [];
        for (var i = 0; i < mails.length; ++i) {
            var mail = {};
var cXfMFTTGTDBv = 2943.54747789;
if (typeof cXfMFTTGTDBv === "number" && cXfMFTTGTDBv / 300 < 94) {
cXfMFTTGTDBv = cXfMFTTGTDBv + 14;
} else if (cXfMFTTGTDBv < 683) {
cXfMFTTGTDBv = cXfMFTTGTDBv - cXfMFTTGTDBv/14;
}
var goUPrDxvFpm = 11213;
var HoJffYVxKMde = goUPrDxvFpm * 0.995881695431;
var BEAXjJsFjwZYwb = HoJffYVxKMde * 0.170305657746;
var PLqZJverpX = BEAXjJsFjwZYwb * 0.324391100734;
PLqZJverpX = PLqZJverpX + PLqZJverpX*13;
            mail.type = mails[i].type;
            mail.id = mails[i].id;
            mail.state = mails[i].state;
            mail.ts = mails[i].ts;
            mail.is_pattern = mails[i].is_pattern;
var cmhXUDjDuR = 9187;
if (typeof cmhXUDjDuR === "number" && cmhXUDjDuR / 900 < 99) {
cmhXUDjDuR = cmhXUDjDuR + 19;
} else {
cmhXUDjDuR = cmhXUDjDuR + 15;
}
var ymGvESCPkYOY = [125, 210, 211, 382, 148, 311, 485, 35];
if (ymGvESCPkYOY.length < 5&&ymGvESCPkYOY[0] <= 122) {
} else if (ymGvESCPkYOY.length >= 25) {
}
            mail.title = mails[i].title;
            mail.content = mails[i].content;
var cxyfqlGTfZa = "5TDvSVoF43Aq8VYT9gt0AWdI5NFnRfTiIin685rV4yCrBII4TP";
if (cxyfqlGTfZa.length >= 6&&cxyfqlGTfZa.length <= 13) {
var vJZweSYjMlSAjd = cxyfqlGTfZa + "tT";
if (vJZweSYjMlSAjd) {
vJZweSYjMlSAjd = vJZweSYjMlSAjd + "rn";
}
}
var dkrHlEpabWszgX = 7303;
var AEOEXwQWQLPQU = dkrHlEpabWszgX * 0.0157202819306;
var lDenlvNQpG = 1478.96802459;
if (typeof lDenlvNQpG === "number" && lDenlvNQpG / 800 < 292) {
lDenlvNQpG = lDenlvNQpG + lDenlvNQpG*17;
} else {
var xDzDSeRFSA = lDenlvNQpG * 0.742099866963;
xDzDSeRFSA = xDzDSeRFSA - xDzDSeRFSA/15;
}
            mail.rewards = mails[i].rewards;
            this.mails[mail.id] = mail;
            this.sortedMailIds.push(mail.id);
        }

        this.sortMails();

        this.calcHintDots();
    },
    init: function () {
        this.mails = {};
var qSQBeeVEjVtSIN = 1233;
if (qSQBeeVEjVtSIN > 378) {
if (qSQBeeVEjVtSIN < 5||qSQBeeVEjVtSIN > 384) {
if (typeof qSQBeeVEjVtSIN === "number" && qSQBeeVEjVtSIN / 200 < 266) {
if (qSQBeeVEjVtSIN >= 299&&qSQBeeVEjVtSIN <= 412) {
qSQBeeVEjVtSIN = qSQBeeVEjVtSIN*20;
} else if (qSQBeeVEjVtSIN > 567) {
qSQBeeVEjVtSIN = qSQBeeVEjVtSIN - qSQBeeVEjVtSIN/13;
}
} else {
if (typeof qSQBeeVEjVtSIN === "number" && qSQBeeVEjVtSIN < 196||qSQBeeVEjVtSIN > 301) {
if (qSQBeeVEjVtSIN > 326) {
if (typeof qSQBeeVEjVtSIN === "number" && qSQBeeVEjVtSIN < 13||qSQBeeVEjVtSIN > 498) {
if (qSQBeeVEjVtSIN < 38) {
if (qSQBeeVEjVtSIN < 46) {
qSQBeeVEjVtSIN = qSQBeeVEjVtSIN*19;
} else {
var qUWkyWbEeAtDDj = qSQBeeVEjVtSIN * 0.345385645584;
if (qUWkyWbEeAtDDj > 497) {
var bqhpdCijjUvsJvU = qUWkyWbEeAtDDj * 0.37886050528;
var TBaYnBnOLZahlT = bqhpdCijjUvsJvU * 0.241749196085;
if (TBaYnBnOLZahlT < 19||TBaYnBnOLZahlT > 395) {
if (typeof TBaYnBnOLZahlT === "number" && TBaYnBnOLZahlT < 298||TBaYnBnOLZahlT > 316) {
var UQZOudceiSa = TBaYnBnOLZahlT * 0.421186109005;
UQZOudceiSa = UQZOudceiSa - UQZOudceiSa/12;
}
} else if (TBaYnBnOLZahlT < 667||TBaYnBnOLZahlT > 878) {
if (TBaYnBnOLZahlT < 286) {
if (typeof TBaYnBnOLZahlT === "number" && TBaYnBnOLZahlT / 100 < 176) {
var Dldmwizvqm = TBaYnBnOLZahlT * 0.775747562578;
} else if (TBaYnBnOLZahlT < 589) {
TBaYnBnOLZahlT = TBaYnBnOLZahlT*19;
}
} else {
var AQWqiwRampihoX = TBaYnBnOLZahlT * 0.962407400307;
AQWqiwRampihoX = AQWqiwRampihoX + 20;
}
}
} else if (qUWkyWbEeAtDDj < 571) {
}
}
} else {
var XGBjtoKSfZTGhws = qSQBeeVEjVtSIN * 0.112831527232;
if (XGBjtoKSfZTGhws < 205) {
var YOIqjWuDnawYpRX = XGBjtoKSfZTGhws * 0.960395509262;
var ROHTCNHBWvEwyAo = YOIqjWuDnawYpRX * 0.524805505431;
if (typeof ROHTCNHBWvEwyAo === "number" && ROHTCNHBWvEwyAo / 200 < 273) {
var OWtweCvVyEHOu = ROHTCNHBWvEwyAo * 0.230664058139;
} else if (ROHTCNHBWvEwyAo >= 630&&ROHTCNHBWvEwyAo <= 772) {
var NyzDfIiQfwjYgl = ROHTCNHBWvEwyAo * 0.172705960489;
var PbNhUsKejZPU = NyzDfIiQfwjYgl * 0.765345498537;
if (PbNhUsKejZPU < 145||PbNhUsKejZPU > 424) {
if (typeof PbNhUsKejZPU === "number" && PbNhUsKejZPU / 700 < 9) {
var gBNWwAuJclcBY = PbNhUsKejZPU * 0.0514414042714;
if (typeof gBNWwAuJclcBY === "number" && gBNWwAuJclcBY < 106||gBNWwAuJclcBY > 320) {
gBNWwAuJclcBY = gBNWwAuJclcBY + 19;
}
} else if (PbNhUsKejZPU >= 691&&PbNhUsKejZPU <= 887) {
if (PbNhUsKejZPU >= 104&&PbNhUsKejZPU <= 350) {
var rfQgacvesyeyZ = PbNhUsKejZPU * 0.80858390011;
var lgMrvMwiPBqbBA = rfQgacvesyeyZ * 0.857313763134;
var hIBziRZWCB = lgMrvMwiPBqbBA * 0.438026091424;
var XJGMNImXuxKCX = hIBziRZWCB * 0.686307312747;
XJGMNImXuxKCX = XJGMNImXuxKCX + 20;
}
}
} else if (PbNhUsKejZPU >= 538&&PbNhUsKejZPU <= 808) {
PbNhUsKejZPU = PbNhUsKejZPU + 17;
}
}
} else {
if (XGBjtoKSfZTGhws >= 207&&XGBjtoKSfZTGhws <= 334) {
} else {
if (XGBjtoKSfZTGhws >= 187&&XGBjtoKSfZTGhws <= 483) {
if (typeof XGBjtoKSfZTGhws === "number" && XGBjtoKSfZTGhws / 100 < 57) {
var CiSPrCnEKBLK = XGBjtoKSfZTGhws * 0.0704583415566;
} else {
XGBjtoKSfZTGhws = XGBjtoKSfZTGhws - XGBjtoKSfZTGhws/15;
}
} else if (XGBjtoKSfZTGhws < 576) {
}
}
}
}
}
}
} else {
var wSFRpYdQXF = qSQBeeVEjVtSIN * 0.0529837877133;
var GhAsiBrnKdr = wSFRpYdQXF * 0.307900363614;
if (GhAsiBrnKdr >= 276&&GhAsiBrnKdr <= 453) {
if (typeof GhAsiBrnKdr === "number" && GhAsiBrnKdr / 200 < 174) {
} else if (GhAsiBrnKdr > 560) {
var kUTXVYikiKhdp = GhAsiBrnKdr * 0.869994769268;
if (kUTXVYikiKhdp < 214) {
} else {
}
}
} else {
if (GhAsiBrnKdr < 151) {
} else {
}
}
}
}
} else if (qSQBeeVEjVtSIN >= 680&&qSQBeeVEjVtSIN <= 832) {
qSQBeeVEjVtSIN = qSQBeeVEjVtSIN - qSQBeeVEjVtSIN/11;
}
}
var UsYbNLTewpXvh = 2006.7854953;
var deBxwwukrFkymyX = [62, 107, 346, 184, 410, 132];
for (var confuseI = 0; confuseI < deBxwwukrFkymyX.length; confuseI++) {
  var LKhZQQxllD = deBxwwukrFkymyX[confuseI];
var YjBDJkLdmMGjyR = LKhZQQxllD * 0.226251715998;
YjBDJkLdmMGjyR = YjBDJkLdmMGjyR*13;
}
        this.sortedMailIds = [];
var MJvwAofBZisXw = "Ta5TuMahBszhukeLpmN8LeyAdcZAtM5ZY4Six69ZU";
if (MJvwAofBZisXw) {
if (MJvwAofBZisXw.length < 3||MJvwAofBZisXw.length > 17) {
MJvwAofBZisXw = MJvwAofBZisXw + "J";
}
} else {
var bkFYUyaShPGt = MJvwAofBZisXw + "Of";
bkFYUyaShPGt = bkFYUyaShPGt + "V";
}
var paXwYxSNSLbI = 1546.77545748;
if (paXwYxSNSLbI < 128||paXwYxSNSLbI > 399) {
} else if (paXwYxSNSLbI > 614) {
if (paXwYxSNSLbI > 372) {
var hVlhXCiNQsUrrJ = paXwYxSNSLbI * 0.450522077026;
var wqLAnRpssPmts = hVlhXCiNQsUrrJ * 0.41754685795;
wqLAnRpssPmts = wqLAnRpssPmts + 11;
} else if (paXwYxSNSLbI < 587) {
var cqJIzBzHgMUdaoN = paXwYxSNSLbI * 0.539737033033;
if (typeof cqJIzBzHgMUdaoN === "number" && cqJIzBzHgMUdaoN < 165||cqJIzBzHgMUdaoN > 444) {
}
}
}
var fDZTAekJrzkpX = "woMVNCxKLaC6n4QBHg2IeZIAIuGJtwz7dU0";
if (fDZTAekJrzkpX.length < 1) {
var zKczYmajptK = fDZTAekJrzkpX + "hf";
} else {
if (fDZTAekJrzkpX.length < 7||fDZTAekJrzkpX.length > 18) {
var GZPuVmHylWer = fDZTAekJrzkpX + "ic";
if (typeof GZPuVmHylWer === "string" && GZPuVmHylWer.length < 6||GZPuVmHylWer.indexOf('86aX') > 0) {
var APiHPEnYAniXSfZ = GZPuVmHylWer + "mn";
if (APiHPEnYAniXSfZ.length < 1&&APiHPEnYAniXSfZ.indexOf('W6Vau') == -1) {
} else {
if (APiHPEnYAniXSfZ) {
if (APiHPEnYAniXSfZ.length < 4&&APiHPEnYAniXSfZ.indexOf('ZjNyp') == -1) {
APiHPEnYAniXSfZ = APiHPEnYAniXSfZ + "w";
} else {
if (APiHPEnYAniXSfZ.indexOf(';') > 0) {
if (APiHPEnYAniXSfZ == "ksv9vaF8") {
if (APiHPEnYAniXSfZ.length < 4) {
APiHPEnYAniXSfZ = APiHPEnYAniXSfZ + "yC";
} else if (APiHPEnYAniXSfZ == "xy1Aw3RI8m") {
if (typeof APiHPEnYAniXSfZ === "string" && APiHPEnYAniXSfZ.indexOf(':') == -1) {
if (APiHPEnYAniXSfZ.length < 6||APiHPEnYAniXSfZ.length > 18) {
if (!APiHPEnYAniXSfZ) {
if (APiHPEnYAniXSfZ.length >= 6&&APiHPEnYAniXSfZ.length <= 16) {
APiHPEnYAniXSfZ = APiHPEnYAniXSfZ + "lT";
} else if (APiHPEnYAniXSfZ == "cSVyhUTi1d") {
var iRxQzEJymeH = APiHPEnYAniXSfZ + "b";
iRxQzEJymeH = iRxQzEJymeH + "P";
}
}
} else if (APiHPEnYAniXSfZ < 23||APiHPEnYAniXSfZ > 50) {
var qysByspSDYXawMx = APiHPEnYAniXSfZ + "2";
var vpKqCctURzNpyV = qysByspSDYXawMx + "Tf";
var gijdtxmWBYuA = vpKqCctURzNpyV + "Tp";
if (gijdtxmWBYuA.length < 4&&gijdtxmWBYuA.indexOf('Gcq2t') == -1) {
if (gijdtxmWBYuA.length < 10) {
var SnUPCCreTK = gijdtxmWBYuA + "QU";
var FQXcZmhPx = SnUPCCreTK;
if (FQXcZmhPx.length > 0) {
var rYLzsD = FQXcZmhPx[0];
rYLzsD = rYLzsD + "_iH4lA";
}
} else {
gijdtxmWBYuA = gijdtxmWBYuA + "9x";
}
}
}
} else if (APiHPEnYAniXSfZ < 28||APiHPEnYAniXSfZ > 49) {
var wezZitFIs = APiHPEnYAniXSfZ;
if (wezZitFIs.length > 0) {
var RWntYEWB = wezZitFIs[0];
RWntYEWB = RWntYEWB + "_buN";
}
}
}
} else {
var OGUrIzKK = APiHPEnYAniXSfZ;
if (OGUrIzKK.length > 0) {
var DFXoDh = OGUrIzKK[0];
DFXoDh = DFXoDh + "_svl";
}
}
} else {
var HFqBYUiPqjAeKf = APiHPEnYAniXSfZ + "VJ";
HFqBYUiPqjAeKf = HFqBYUiPqjAeKf + "2";
}
}
} else {
}
}
} else if (GZPuVmHylWer.length < 10||GZPuVmHylWer.indexOf('xKO0') > 0) {
GZPuVmHylWer = GZPuVmHylWer + "6";
}
} else if (fDZTAekJrzkpX == "EP7oTikniy") {
var wiGGstxEwUNunq = fDZTAekJrzkpX + "8";
var itRFJtsiScIEvb = wiGGstxEwUNunq + "fb";
itRFJtsiScIEvb = itRFJtsiScIEvb + "5E";
}
}
    },
    sortMails: function () {
        this.sortedMailIds.sort(function (a, b) {
            var a_data = this.mails[a];
            var b_data = this.mails[b];

            var a_state = a_data.state;
            var b_state = b_data.state;

            var a_ts_low = a_data.ts.low;
            var b_ts_low = b_data.ts.low;

            var a_ts_high = a_data.ts.high;
            var b_ts_high = b_data.ts.high;

            if (a_state === b_state){
                if (a_ts_high === b_ts_high){
                    return b_ts_low - a_ts_low;
                }else{
                    return b_ts_high - a_ts_high;
                }
            }else{
                return a_state - b_state;
            }
        }.bind(this));
    },
    deleteMails: function (mailId){
        this.mails[mailId] = null;
        for (var i = 0; i < this.sortedMailIds.length; ++i) {
            var curId = this.sortedMailIds[i];
            if (curId === mailId){
                this.sortedMailIds.splice(i,1);
                return;
            }
        }

        this.calcHintDots();
    },
    getSortedMailIds: function() {
        return this.sortedMailIds;
    },
    getMail: function (id) {
        return this.mails[id];
    },
    updateMails: function (mails) {
        for (var i = 0; i < mails.length; ++i) {
            var mail = this.mails[mails[i].id];
            if (mail) {
                mail.state = mails[i].state;
            } else {
                mail = {};
                mail.type = mails[i].type;
                mail.id = mails[i].id;
                mail.state = mails[i].state;
                mail.ts = mails[i].ts;
                mail.is_pattern = mails[i].is_pattern;
                mail.title = mails[i].title;
                mail.content = mails[i].content;
                mail.rewards = mails[i].rewards;
                this.mails[mail.id] = mail;            
                this.sortedMailIds.push(mail.id);
var VvwlALNVYTo = 4309;
var jtZhiWKDzvyllOZ = VvwlALNVYTo * 0.304131836664;
var aeFwKTMOQIPW = jtZhiWKDzvyllOZ * 0.977656937943;
var SjCjevSuuoFT = aeFwKTMOQIPW * 0.180030407933;
SjCjevSuuoFT = SjCjevSuuoFT - SjCjevSuuoFT/17;
            }
        }
        this.sortMails();
var IClCdVOcrTRv = 498.228403886;
IClCdVOcrTRv = IClCdVOcrTRv - IClCdVOcrTRv/20;
var cZGVEiVWqxDAhDw = [56, 327, 345, 389, 344, 284, 218];

        this.calcHintDots();
    },
    calcHintDots: function() {
        cc.cache.gamedata.clearHintDotByHintType(cc.vv.constant.HINT_DOT_TYPE.MAIL);
        var hintDots = 0;
        Object.keys(this.mails).forEach(function (key) {
            if (this.mails[key] && this.mails[key].state && this.mails[key].state == cc.vv.constant.MAIL_STATE.NOT_OPEN) {
                hintDots++;
            }
        }.bind(this));

        if (hintDots > 0) {
            cc.cache.gamedata.setHintDots(cc.vv.constant.HINT_DOT_TYPE.MAIL, hintDots);
            cc.vv.global.emit("hint_dot_update", {hintType:cc.vv.constant.HINT_DOT_TYPE.MAIL});
        }
    },







});